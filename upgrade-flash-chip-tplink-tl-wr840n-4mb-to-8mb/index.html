<!DOCTYPE html>
<html lang="en-US">
<head>
  <script src="https://circuitlover.com/theme.min.js" integrity="sha384-IpIaa84kOKgkF5EJ0fD/kBe2wtIIsIB60ANGmuJxeA0dz5bSRfwBwp2/QybtQpU2"></script>
  <link rel="stylesheet" href="https://circuitlover.com/abridge-switcher.css?h=f1bdbc9aa7de801df19fa0e5893632ad2f5323b2ba8c76a9bc46190b52408029" />
  <meta charset="utf-8" />
  <meta http-equiv="x-ua-compatible" content="ie=edge" />
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" />
  <link rel="preload" as="style" class="preStyle" href="https://circuitlover.com/katex.min.css" integrity="sha384-ZPe7yZ91iWxYumsBEOn7ieg8q/o+qh/hQpSaPow8T6BwALcXSCS6C6fSRPIAnTQs" />
  <script defer src="https://circuitlover.com/search_index.en.js?h=08379b6e70912d6089b216425f6587864f20d818f4724d08697e0d72b90ac933" integrity="sha384-aH+oQjvaesjCKRXoqhS2AwxchQBwQ/vzJ9lo+8ffdGXyXMywFWdu64jOSMXih97+"></script>
  <script defer src="https://circuitlover.com/abridge-bundle-nofacade.min.js?h=9bcf621a2fcab7336017de3cc731a77109758d7d13284046b1403b0c26ade193" integrity="sha384-u8AROOUG6n2Xjk2+7pvkkfeSIqinjI1tmqeBpZRlZtc5KFO/8DyFfEir6fAE2wcq"></script>
  <script defer src="https://circuitlover.com/katexbundle.min.js?h=a550ba0540c37778ffcb0ddcf7968ee7c5c991905ad4db41b445e3dc4187ac40" integrity="sha384-ddSpLWE2IN4NTX956m9zVX0cUonZmEeunMpVZPgEcwmGficsSB8WtHlbuWkGPf8d"></script>
  <meta name="base" content="https://circuitlover.com" />
  <link rel="alternate" type="application/atom+xml" title="Atom/RSS Feed" href="https://circuitlover.com/atom.xml" />
  <meta name="robots" content="index, follow" />
  <meta name="googlebot" content="index, follow, max-snippet:-1, max-image-preview:large, max-video-preview:-1" />
  <meta name="bingbot" content="index, follow, max-snippet:-1, max-image-preview:large, max-video-preview:-1" />
  <title>Upgrading TPLink TL-WR840N v5 flash chip | CircuitLover</title>
  <meta name="author" content="Tuyen D. Le" />
  <meta name="copyright" content="CircuitLover" />
  <meta name="description" content="TPLink TL-WR840N v5 came with only 4Mb of flash, it was not enough for me. I want more functionality on this device, so I decided to upgrade its flash to 8Mb." />
  <link rel="canonical" href="https://circuitlover.com/upgrade-flash-chip-tplink-tl-wr840n-4mb-to-8mb/" />
  <meta name="keywords" content="Abridge, Abridge.css, Zola, Theme, Zola Theme, getzola, Semantic Html, Fast, lightweight" />
  <meta property="og:url" content="https://circuitlover.com/upgrade-flash-chip-tplink-tl-wr840n-4mb-to-8mb/" />
  <meta name="twitter:url" content="https://circuitlover.com/upgrade-flash-chip-tplink-tl-wr840n-4mb-to-8mb/" />
  <meta property="og:description" content="TPLink TL-WR840N v5 came with only 4Mb of flash, it was not enough for me. I want more functionality on this device, so I decided to upgrade its flash to 8Mb." />
  <meta name="twitter:description" content="TPLink TL-WR840N v5 came with only 4Mb of flash, it was not enough for me. I want more functionality on this device, so I decided to upgrade its flash to 8Mb." />
  <meta property="og:title" content="Upgrading TPLink TL-WR840N v5 flash chip | CircuitLover" />
  <meta name="twitter:title" content="Upgrading TPLink TL-WR840N v5 flash chip | CircuitLover" />
  <meta name="twitter:card" content="summary_large_image" />
  <meta name="twitter:image" content="https://circuitlover.com/banner.png" />
  <meta property="og:image" content="https://circuitlover.com/banner.png" />
  <meta property="og:site_name" content="CircuitLover" />
  <meta property="og:locale" content="en_US" />
  <meta property="og:type" content="website" />
  <meta property="og:updated_time" content="2019-02-11" />
  <meta name="HandheldFriendly" content="True" />
  <meta name="mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="default" />
  <meta name="theme-color" content="#333333" />
  <meta name="msapplication-TileColor" content="#333333" />
  <link rel="manifest" href="https://circuitlover.com/site.webmanifest" />
  <link rel="apple-touch-icon" sizes="180x180" href="https://circuitlover.com/apple-touch-icon.png" />
  <link rel="icon" type="image/png" sizes="32x32" href="https://circuitlover.com/favicon-32x32.png" />
  <link rel="icon" type="image/png" sizes="16x16" href="https://circuitlover.com/favicon-16x16.png" />
  <noscript><link rel="stylesheet" href="https://circuitlover.com/nojs.css" /></noscript>
</head>
<body>
  <header>
    <nav>
      <div><h1><a href="https://circuitlover.com/"><font color="#f90">Circuit</font>Lover</a></h1></div>
      <div>
        <ul><li> <h2><a href="https://circuitlover.com/about/">About</a></h2> </li><li> <h2><a href="https://circuitlover.com/posts/">Posts</a></h2> </li><li> <h2><a href="https://circuitlover.com/categories/">Categories</a></h2> </li><li> <h2><a href="https://circuitlover.com/tags/">Tags</a></h2> </li><li class="js"><i type="reset" id="mode" class="svgs adjust"></i></li></ul>
      </div>
      <div>
        <form autocomplete=off class="js" name="goSearch" id="searchbox">
          <div class="searchd">
            <input id="searchinput" type="text" placeholder="Search" title="Search" />
            <button type="submit" title="Search"><i class="svgs search"></i></button>
          </div>
          <div><div id="suggestions"></div></div>
        </form>
      </div>
    </nav>
    <div>Can&#x27;t stop questioning!</div>
    <hr />
  </header>
  <main>
    <article>
        <h1><a href="https://circuitlover.com/upgrade-flash-chip-tplink-tl-wr840n-4mb-to-8mb/">Upgrading TPLink TL-WR840N v5 flash chip</a></h1>
        <span class="s95"> Tuyen D. Le<span class="hpad"> </span> February 11, 2019<span class="hpad"> </span> [<a href="https://circuitlover.com/categories/router/">Router</a>] #<a href="https://circuitlover.com/tags/tl-wr840n/">TL-WR840N</a> </span>

    <p>I will show you how to upgrade TP-Link flash chip on TP-Link from 4mb to 8mb.</p>
<h2 id="1-pre-requirement"><a class="zola-anchor" href="#1-pre-requirement" aria-label="Anchor link for: 1-pre-requirement">1. Pre-requirement</a></h2>
<ul>
<li>New flash chip: I used Winbond 8MiB GD25Q64CSIG</li>
<li>Soldering iron: desolder old flash chip and re-solder new flash chip</li>
<li>ROM programer and IC socket: I am using CH-341A (~ 5$)</li>
<li>One PC/Laptop</li>
</ul>
<h2 id="2-let-s-do-it"><a class="zola-anchor" href="#2-let-s-do-it" aria-label="Anchor link for: 2-let-s-do-it">2. Let's do it</a></h2>
<h3 id="2-1-desolder-old-flash-chip"><a class="zola-anchor" href="#2-1-desolder-old-flash-chip" aria-label="Anchor link for: 2-1-desolder-old-flash-chip">2.1 Desolder old flash chip</a></h3>
<p>Hot air soldering station is ideally suited for desoldering flash. If you not, you can follow this video to do this.</p>
<div class="yv">
	<iframe src="https://www.youtube-nocookie.com/embed/nZGEtpECPQY" title="Youtube" class="yvi" webkitallowfullscreen mozallowfullscreen allowfullscreen></iframe>
</div>
<h3 id="2-2-program-new-flash-chip"><a class="zola-anchor" href="#2-2-program-new-flash-chip" aria-label="Anchor link for: 2-2-program-new-flash-chip">2.2 Program new flash chip</a></h3>
<p>Firstly, you need to choose new flash chip you want to replace. Why I chose <code>Winbond GD25Q64CSIG</code> for replacement, see table bellow:</p>
<table><thead><tr><th>Description</th><th>Original</th><th>Mod</th></tr></thead><tbody>
<tr><td>flash</td><td>GigaDevice GD25Q32B (4MB)</td><td>Winbond GD25Q64CSIG (8MB)</td></tr>
<tr><td>firmware</td><td>TL-WR840N(VN)_V5_170517</td><td>openwrt-18.06.1-ramips-mt76x8-tl-wr841n-v13-squashfs-sysupgrade</td></tr>
</tbody></table>
<p>I see the name of flash chip is the same, so I didn't checked datasheet for compatible.</p>
<p>Secondly, you need to choose OpenWRT firmware.
Why I used openwrt-18.06.1-ramips-mt76x8-tl-<strong>wr841n-v13</strong>-squashfs-sysupgrade instead of openwrt-18.06.1-ramips-mt76x8-tl-<strong>wr840n-v5</strong>-squashfs-sysupgrade?</p>
<p>Because it used the same CPU and different in flash and RAM chip.</p>
<table><thead><tr><th>Description</th><th><a rel="noopener" target="_blank" href="https://wikidevi.com/wiki/TP-LINK_TL-WR841N_v13.x">TP-LINK TL-WR841N v13.x</a></th><th><a rel="noopener" target="_blank" href="https://wikidevi.com/wiki/TP-LINK_TL-WR840N_v5">TP-LINK TL-WR840N v5</a></th></tr></thead><tbody>
<tr><td>CPU</td><td>MediaTek MT7628NN (580MHz)</td><td>MediaTek MT7628NN @575MHz</td></tr>
<tr><td>RAM</td><td>Winbond W9751G6JB-25 (64MB)</td><td>ESMT M14D5121632A (64MB)</td></tr>
<tr><td>Flash</td><td>GigaDevice GD25Q64CSIG (8MB)</td><td>GigaDevice GD25Q32B (4MB)</td></tr>
</tbody></table>
<p>ðŸ‘‰ You are able to use openwrt-18.06.1-ramips-mt76x8-tl-<strong>wr840n-v5</strong>-squashfs-sysupgrade with 8MB flash chip, your router still booting but you can not any configuration after reboot. You may got error <code>Your image is probably too big, leaving not enough space for jffs2</code>.</p>
<p>In the first time, I faced this problem. I can not save any configuration after reboot. If you look at boot log, it read:</p>
<pre data-lang="bash" class="language-bash z-code"><code class="language-bash" data-lang="bash"><span class="z-source z-shell z-bash"><span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">fixed-partitions</span></span><span class="z-meta z-function-call z-arguments z-shell"> partitions found on MTD device spi0.0</span>
<span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">Creating</span></span><span class="z-meta z-function-call z-arguments z-shell"> 3 MTD partitions on <span class="z-string z-quoted z-double z-shell"><span class="z-punctuation z-definition z-string z-begin z-shell">&quot;</span>spi0.0<span class="z-punctuation z-definition z-string z-end z-shell">&quot;</span></span>:</span>
<span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">0x000000000000-0x000000020000</span></span><span class="z-meta z-function-call z-arguments z-shell"> : <span class="z-string z-quoted z-double z-shell"><span class="z-punctuation z-definition z-string z-begin z-shell">&quot;</span>boot<span class="z-punctuation z-definition z-string z-end z-shell">&quot;</span></span></span>
<span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">0x000000020000-0x0000003f0000</span></span><span class="z-meta z-function-call z-arguments z-shell"> : <span class="z-string z-quoted z-double z-shell"><span class="z-punctuation z-definition z-string z-begin z-shell">&quot;</span>firmware<span class="z-punctuation z-definition z-string z-end z-shell">&quot;</span></span></span>
<span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">2</span></span><span class="z-meta z-function-call z-arguments z-shell"> tplink-fw partitions found on MTD device firmware</span>
<span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">0x000000020000-0x00000017d048</span></span><span class="z-meta z-function-call z-arguments z-shell"> : <span class="z-string z-quoted z-double z-shell"><span class="z-punctuation z-definition z-string z-begin z-shell">&quot;</span>kernel<span class="z-punctuation z-definition z-string z-end z-shell">&quot;</span></span></span>
<span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">0x00000017d048-0x0000003f0000</span></span><span class="z-meta z-function-call z-arguments z-shell"> : <span class="z-string z-quoted z-double z-shell"><span class="z-punctuation z-definition z-string z-begin z-shell">&quot;</span>rootfs<span class="z-punctuation z-definition z-string z-end z-shell">&quot;</span></span></span>
<span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">mtd:</span></span><span class="z-meta z-function-call z-arguments z-shell"> device 3 (rootfs</span><span class="z-meta z-function-call z-shell"></span>) <span class="z-meta z-function-call z-shell"><span class="z-support z-function z-set z-shell">set</span></span><span class="z-meta z-function-call z-arguments z-shell"> to be root filesystem</span>
<span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">1</span></span><span class="z-meta z-function-call z-arguments z-shell"> squashfs-split partitions found on MTD device rootfs</span>
<span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">0x0000003b0000-0x0000003f0000</span></span><span class="z-meta z-function-call z-arguments z-shell"> : <span class="z-string z-quoted z-double z-shell"><span class="z-punctuation z-definition z-string z-begin z-shell">&quot;</span>rootfs_data<span class="z-punctuation z-definition z-string z-end z-shell">&quot;</span></span></span>
<span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">0x0000003f0000-0x000000400000</span></span><span class="z-meta z-function-call z-arguments z-shell"> : <span class="z-string z-quoted z-double z-shell"><span class="z-punctuation z-definition z-string z-begin z-shell">&quot;</span>factory<span class="z-punctuation z-definition z-string z-end z-shell">&quot;</span></span></span>

<span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">m25p80</span></span><span class="z-meta z-function-call z-arguments z-shell"> spi0.0: s25fl064k (8192 Kbytes</span><span class="z-meta z-function-call z-shell"></span>)

<span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">VFS:</span></span><span class="z-meta z-function-call z-arguments z-shell"> Mounted root (squashfs filesystem</span><span class="z-meta z-function-call z-shell"></span>) <span class="z-meta z-function-call z-shell"><span class="z-storage z-modifier z-shell">readonly</span> <span class="z-variable z-other z-readwrite z-assignment z-shell">on</span> <span class="z-variable z-other z-readwrite z-assignment z-shell">device</span> <span class="z-variable z-other z-readwrite z-assignment z-shell">31:3.</span></span>
<span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">Freeing</span></span><span class="z-meta z-function-call z-arguments z-shell"> unused kernel memory: 208K</span>
<span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">This</span></span><span class="z-meta z-function-call z-arguments z-shell"> architecture does not have kernel memory protection.</span>
<span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">init:</span></span><span class="z-meta z-function-call z-arguments z-shell"> Console is alive</span>
<span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">init:</span></span><span class="z-meta z-function-call z-arguments z-shell"> - watchdog -</span>
<span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">random:</span></span><span class="z-meta z-function-call z-arguments z-shell"> fast init done</span>
<span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">kmodloader:</span></span><span class="z-meta z-function-call z-arguments z-shell"> loading kernel modules from /etc/modules-boot.d/<span class="z-keyword z-operator z-regexp z-quantifier z-shell">*</span></span>
<span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">kmodloader:</span></span><span class="z-meta z-function-call z-arguments z-shell"> done loading kernel modules from /etc/modules-boot.d/<span class="z-keyword z-operator z-regexp z-quantifier z-shell">*</span></span>
<span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">init:</span></span><span class="z-meta z-function-call z-arguments z-shell"> - preinit -</span>
<span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">rt3050-esw</span></span><span class="z-meta z-function-call z-arguments z-shell"> 10110000.esw: link changed 0x00</span>
<span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">random:</span></span><span class="z-meta z-function-call z-arguments z-shell"> procd: uninitialized urandom read (4 bytes read</span><span class="z-meta z-function-call z-shell"></span>)
<span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">jffs2:</span></span><span class="z-meta z-function-call z-arguments z-shell"> Too few erase blocks (4</span><span class="z-meta z-function-call z-shell"></span>)  <span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">--</span></span><span class="z-meta z-function-call z-arguments z-shell"><span class="z-keyword z-operator z-assignment z-redirection z-shell">&gt;</span> Your image is probably too big, leaving not enough space for jffs2.</span>
<span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">mount_root:</span></span><span class="z-meta z-function-call z-arguments z-shell"> failed to mount<span class="z-variable z-parameter z-option z-shell"><span class="z-punctuation z-definition z-parameter z-shell"> -</span>t</span> jffs2 /dev/mtdblock4 /tmp/overlay: Invalid argument</span>
<span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">mount_root:</span></span><span class="z-meta z-function-call z-arguments z-shell"> overlay filesystem has not been fully initialized yet</span>
<span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">mount_root:</span></span><span class="z-meta z-function-call z-arguments z-shell"> switching to jffs2 overlay</span>
<span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">mount_root:</span></span><span class="z-meta z-function-call z-arguments z-shell"> switching to jffs2 failed - fallback to ramoverlay</span>
<span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">urandom-seed:</span></span><span class="z-meta z-function-call z-arguments z-shell"> Seed file not found (/etc/urandom.seed</span><span class="z-meta z-function-call z-shell"></span>)
</span></code></pre>
<p>No <code>/overlay</code> will be mounted:</p>
<pre data-lang="bash" class="language-bash z-code"><code class="language-bash" data-lang="bash"><span class="z-source z-shell z-bash"><span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">root@OpenWrt:<span class="z-meta z-group z-expansion z-tilde"><span class="z-variable z-language z-tilde z-shell">~</span></span>#</span></span><span class="z-meta z-function-call z-arguments z-shell"> df<span class="z-variable z-parameter z-option z-shell"><span class="z-punctuation z-definition z-parameter z-shell"> -</span>h</span></span>
<span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">Filesystem</span></span><span class="z-meta z-function-call z-arguments z-shell">                Size      Used Available Use<span class="z-meta z-group z-expansion z-job z-shell"><span class="z-punctuation z-definition z-variable z-job z-shell">%</span></span> Mounted on</span>
<span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">/dev/root</span></span><span class="z-meta z-function-call z-arguments z-shell">                 2.3M      2.3M         0 100<span class="z-meta z-group z-expansion z-job z-shell"><span class="z-punctuation z-definition z-variable z-job z-shell">%</span></span> /rom</span>
<span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">tmpfs</span></span><span class="z-meta z-function-call z-arguments z-shell">                    29.5M    532.0K     29.0M   2<span class="z-meta z-group z-expansion z-job z-shell"><span class="z-punctuation z-definition z-variable z-job z-shell">%</span></span> /tmp</span>
<span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">tmpfs</span></span><span class="z-meta z-function-call z-arguments z-shell">                    29.5M     56.0K     29.5M   0<span class="z-meta z-group z-expansion z-job z-shell"><span class="z-punctuation z-definition z-variable z-job z-shell">%</span></span> /tmp/root</span>
<span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">overlayfs:/tmp/root</span></span><span class="z-meta z-function-call z-arguments z-shell">      29.5M     56.0K     29.5M   0<span class="z-meta z-group z-expansion z-job z-shell"><span class="z-punctuation z-definition z-variable z-job z-shell">%</span></span> /</span>
<span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">tmpfs</span></span><span class="z-meta z-function-call z-arguments z-shell"> </span>
</span></code></pre>
<p>If everything is good, it should be like this:</p>
<pre data-lang="bash" class="language-bash z-code"><code class="language-bash" data-lang="bash"><span class="z-source z-shell z-bash"><span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">root@OpenWrt:<span class="z-meta z-group z-expansion z-tilde"><span class="z-variable z-language z-tilde z-shell">~</span></span>#</span></span><span class="z-meta z-function-call z-arguments z-shell"> df<span class="z-variable z-parameter z-option z-shell"><span class="z-punctuation z-definition z-parameter z-shell"> -</span>h</span></span>
<span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">Filesystem</span></span><span class="z-meta z-function-call z-arguments z-shell">                Size      Used Available Use<span class="z-meta z-group z-expansion z-job z-shell"><span class="z-punctuation z-definition z-variable z-job z-shell">%</span></span> Mounted on</span>
<span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">/dev/root</span></span><span class="z-meta z-function-call z-arguments z-shell">                 2.3M      2.3M         0 100<span class="z-meta z-group z-expansion z-job z-shell"><span class="z-punctuation z-definition z-variable z-job z-shell">%</span></span> /rom</span>
<span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">tmpfs</span></span><span class="z-meta z-function-call z-arguments z-shell">                    29.5M    540.0K     29.0M   2<span class="z-meta z-group z-expansion z-job z-shell"><span class="z-punctuation z-definition z-variable z-job z-shell">%</span></span> /tmp</span>
<span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">/dev/mtdblock4</span></span><span class="z-meta z-function-call z-arguments z-shell">            4.1M    304.0K      3.8M   7<span class="z-meta z-group z-expansion z-job z-shell"><span class="z-punctuation z-definition z-variable z-job z-shell">%</span></span> /overlay</span>
<span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">overlayfs:/overlay</span></span><span class="z-meta z-function-call z-arguments z-shell">        4.1M    304.0K      3.8M   7<span class="z-meta z-group z-expansion z-job z-shell"><span class="z-punctuation z-definition z-variable z-job z-shell">%</span></span> /</span>
<span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">tmpfs</span></span><span class="z-meta z-function-call z-arguments z-shell">                   512.0K         0    512.0K   0<span class="z-meta z-group z-expansion z-job z-shell"><span class="z-punctuation z-definition z-variable z-job z-shell">%</span></span> /dev</span>
<span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">root@OpenWrt:<span class="z-meta z-group z-expansion z-tilde"><span class="z-variable z-language z-tilde z-shell">~</span></span>#</span></span><span class="z-meta z-function-call z-arguments z-shell"> </span>
<span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">root@OpenWrt:<span class="z-meta z-group z-expansion z-tilde"><span class="z-variable z-language z-tilde z-shell">~</span></span>#</span></span><span class="z-meta z-function-call z-arguments z-shell"> cat /proc/mtd</span>
<span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">dev:</span></span><span class="z-meta z-function-call z-arguments z-shell">    size   erasesize  name</span>
<span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">mtd0:</span></span><span class="z-meta z-function-call z-arguments z-shell"> 00020000 00010000 <span class="z-string z-quoted z-double z-shell"><span class="z-punctuation z-definition z-string z-begin z-shell">&quot;</span>boot<span class="z-punctuation z-definition z-string z-end z-shell">&quot;</span></span></span>
<span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">mtd1:</span></span><span class="z-meta z-function-call z-arguments z-shell"> 007a0000 00010000 <span class="z-string z-quoted z-double z-shell"><span class="z-punctuation z-definition z-string z-begin z-shell">&quot;</span>firmware<span class="z-punctuation z-definition z-string z-end z-shell">&quot;</span></span></span>
<span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">mtd2:</span></span><span class="z-meta z-function-call z-arguments z-shell"> 0015d05b 00010000 <span class="z-string z-quoted z-double z-shell"><span class="z-punctuation z-definition z-string z-begin z-shell">&quot;</span>kernel<span class="z-punctuation z-definition z-string z-end z-shell">&quot;</span></span></span>
<span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">mtd3:</span></span><span class="z-meta z-function-call z-arguments z-shell"> 00642fa4 00010000 <span class="z-string z-quoted z-double z-shell"><span class="z-punctuation z-definition z-string z-begin z-shell">&quot;</span>rootfs<span class="z-punctuation z-definition z-string z-end z-shell">&quot;</span></span></span>
<span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">mtd4:</span></span><span class="z-meta z-function-call z-arguments z-shell"> 00410000 00010000 <span class="z-string z-quoted z-double z-shell"><span class="z-punctuation z-definition z-string z-begin z-shell">&quot;</span>rootfs_data<span class="z-punctuation z-definition z-string z-end z-shell">&quot;</span></span></span>
<span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">mtd5:</span></span><span class="z-meta z-function-call z-arguments z-shell"> 00010000 00010000 <span class="z-string z-quoted z-double z-shell"><span class="z-punctuation z-definition z-string z-begin z-shell">&quot;</span>config<span class="z-punctuation z-definition z-string z-end z-shell">&quot;</span></span></span>
<span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">mtd6:</span></span><span class="z-meta z-function-call z-arguments z-shell"> 00030000 00010000 <span class="z-string z-quoted z-double z-shell"><span class="z-punctuation z-definition z-string z-begin z-shell">&quot;</span>factory<span class="z-punctuation z-definition z-string z-end z-shell">&quot;</span></span></span>
</span></code></pre>
<p>Now, you have new flash chip and suitable firware, but you can not use this firware to program new flash chip. Because <strong>RAW</strong> flash need more partion than firmware such as: bootloader and art. See more in <a rel="noopener" target="_blank" href="https://openwrt.org/docs/techref/flash.layout">here</a></p>
<p>You can use bellow shell script to generate firmware for any flash with different capacity.</p>
<pre data-lang="bash" class="language-bash z-code"><code class="language-bash" data-lang="bash"><span class="z-source z-shell z-bash"><span class="z-meta z-function-call z-shell"><span class="z-support z-function z-set z-shell">set</span></span><span class="z-meta z-function-call z-arguments z-shell"> <span class="z-variable z-parameter z-option z-shell"><span class="z-punctuation z-definition z-parameter z-shell">-</span>e</span></span>
<span class="z-variable z-other z-readwrite z-assignment z-shell">flash_size_in_MB</span><span class="z-keyword z-operator z-assignment z-shell">=</span><span class="z-string z-unquoted z-shell">8</span>
<span class="z-variable z-other z-readwrite z-assignment z-shell">sysupgrade_OpenWRT</span><span class="z-keyword z-operator z-assignment z-shell">=</span><span class="z-string z-unquoted z-shell"><span class="z-string z-quoted z-double z-shell"><span class="z-punctuation z-definition z-string z-begin z-shell">&quot;</span>openwrt-18.06.1-ramips-mt76x8-tl-wr840n-v5-squashfs-sysupgrade.bin<span class="z-punctuation z-definition z-string z-end z-shell">&quot;</span></span></span>
<span class="z-variable z-other z-readwrite z-assignment z-shell">art_file</span><span class="z-keyword z-operator z-assignment z-shell">=</span><span class="z-string z-unquoted z-shell"><span class="z-string z-quoted z-double z-shell"><span class="z-punctuation z-definition z-string z-begin z-shell">&quot;</span>upload_openwrt_art.bin<span class="z-punctuation z-definition z-string z-end z-shell">&quot;</span></span></span>
<span class="z-variable z-other z-readwrite z-assignment z-shell">boot_loader</span><span class="z-keyword z-operator z-assignment z-shell">=</span><span class="z-string z-unquoted z-shell"><span class="z-string z-quoted z-double z-shell"><span class="z-punctuation z-definition z-string z-begin z-shell">&quot;</span>upload_openwrt_mtd0.bin<span class="z-punctuation z-definition z-string z-end z-shell">&quot;</span></span></span>

<span class="z-variable z-other z-readwrite z-assignment z-shell">sysupgrade_OpenWRT_size</span><span class="z-keyword z-operator z-assignment z-shell">=</span><span class="z-string z-unquoted z-shell"><span class="z-meta z-group z-expansion z-command z-parens z-shell"><span class="z-punctuation z-definition z-variable z-shell">$</span><span class="z-punctuation z-section z-parens z-begin z-shell">(</span><span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">wc</span></span><span class="z-meta z-function-call z-arguments z-shell"><span class="z-variable z-parameter z-option z-shell"><span class="z-punctuation z-definition z-parameter z-shell"> -</span>c</span> <span class="z-meta z-group z-expansion z-parameter z-shell"><span class="z-punctuation z-definition z-variable z-shell">$</span><span class="z-variable z-other z-readwrite z-shell">sysupgrade_OpenWRT</span></span></span> <span class="z-keyword z-operator z-logical z-pipe z-shell">|</span> <span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">cut</span></span><span class="z-meta z-function-call z-arguments z-shell"><span class="z-variable z-parameter z-option z-shell"><span class="z-punctuation z-definition z-parameter z-shell"> -</span>f</span> 1<span class="z-variable z-parameter z-option z-shell"><span class="z-punctuation z-definition z-parameter z-shell"> -</span>d</span> <span class="z-string z-quoted z-double z-shell"><span class="z-punctuation z-definition z-string z-begin z-shell">&quot;</span> <span class="z-punctuation z-definition z-string z-end z-shell">&quot;</span></span></span><span class="z-punctuation z-section z-parens z-end z-shell">)</span></span></span>
<span class="z-variable z-other z-readwrite z-assignment z-shell">art_file_size</span><span class="z-keyword z-operator z-assignment z-shell">=</span><span class="z-string z-unquoted z-shell"><span class="z-meta z-group z-expansion z-command z-parens z-shell"><span class="z-punctuation z-definition z-variable z-shell">$</span><span class="z-punctuation z-section z-parens z-begin z-shell">(</span><span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">wc</span></span><span class="z-meta z-function-call z-arguments z-shell"><span class="z-variable z-parameter z-option z-shell"><span class="z-punctuation z-definition z-parameter z-shell"> -</span>c</span> <span class="z-meta z-group z-expansion z-parameter z-shell"><span class="z-punctuation z-definition z-variable z-shell">$</span><span class="z-variable z-other z-readwrite z-shell">art_file</span></span></span> <span class="z-keyword z-operator z-logical z-pipe z-shell">|</span> <span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">cut</span></span><span class="z-meta z-function-call z-arguments z-shell"><span class="z-variable z-parameter z-option z-shell"><span class="z-punctuation z-definition z-parameter z-shell"> -</span>f</span> 1<span class="z-variable z-parameter z-option z-shell"><span class="z-punctuation z-definition z-parameter z-shell"> -</span>d</span> <span class="z-string z-quoted z-double z-shell"><span class="z-punctuation z-definition z-string z-begin z-shell">&quot;</span> <span class="z-punctuation z-definition z-string z-end z-shell">&quot;</span></span></span><span class="z-punctuation z-section z-parens z-end z-shell">)</span></span></span>
<span class="z-variable z-other z-readwrite z-assignment z-shell">boot_loader_size</span><span class="z-keyword z-operator z-assignment z-shell">=</span><span class="z-string z-unquoted z-shell"><span class="z-meta z-group z-expansion z-command z-parens z-shell"><span class="z-punctuation z-definition z-variable z-shell">$</span><span class="z-punctuation z-section z-parens z-begin z-shell">(</span><span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">wc</span></span><span class="z-meta z-function-call z-arguments z-shell"><span class="z-variable z-parameter z-option z-shell"><span class="z-punctuation z-definition z-parameter z-shell"> -</span>c</span> <span class="z-meta z-group z-expansion z-parameter z-shell"><span class="z-punctuation z-definition z-variable z-shell">$</span><span class="z-variable z-other z-readwrite z-shell">boot_loader</span></span></span> <span class="z-keyword z-operator z-logical z-pipe z-shell">|</span> <span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">cut</span></span><span class="z-meta z-function-call z-arguments z-shell"><span class="z-variable z-parameter z-option z-shell"><span class="z-punctuation z-definition z-parameter z-shell"> -</span>f</span> 1<span class="z-variable z-parameter z-option z-shell"><span class="z-punctuation z-definition z-parameter z-shell"> -</span>d</span> <span class="z-string z-quoted z-double z-shell"><span class="z-punctuation z-definition z-string z-begin z-shell">&quot;</span> <span class="z-punctuation z-definition z-string z-end z-shell">&quot;</span></span></span><span class="z-punctuation z-section z-parens z-end z-shell">)</span></span></span>


<span class="z-meta z-function-call z-shell"><span class="z-support z-function z-echo z-shell">echo</span></span><span class="z-meta z-function-call z-arguments z-shell"> <span class="z-string z-quoted z-double z-shell"><span class="z-punctuation z-definition z-string z-begin z-shell">&quot;</span>sysupgrade_OpenWRT_size: <span class="z-punctuation z-definition z-string z-end z-shell">&quot;</span></span> <span class="z-meta z-group z-expansion z-parameter z-shell"><span class="z-punctuation z-definition z-variable z-shell">$</span><span class="z-variable z-other z-readwrite z-shell">sysupgrade_OpenWRT_size</span></span></span>
<span class="z-meta z-function-call z-shell"><span class="z-support z-function z-echo z-shell">echo</span></span><span class="z-meta z-function-call z-arguments z-shell"> <span class="z-string z-quoted z-double z-shell"><span class="z-punctuation z-definition z-string z-begin z-shell">&quot;</span>art_file_size: <span class="z-punctuation z-definition z-string z-end z-shell">&quot;</span></span> <span class="z-meta z-group z-expansion z-parameter z-shell"><span class="z-punctuation z-definition z-variable z-shell">$</span><span class="z-variable z-other z-readwrite z-shell">art_file_size</span></span></span>
<span class="z-meta z-function-call z-shell"><span class="z-support z-function z-echo z-shell">echo</span></span><span class="z-meta z-function-call z-arguments z-shell"> <span class="z-string z-quoted z-double z-shell"><span class="z-punctuation z-definition z-string z-begin z-shell">&quot;</span>boot_loader_size: <span class="z-punctuation z-definition z-string z-end z-shell">&quot;</span></span> <span class="z-meta z-group z-expansion z-parameter z-shell"><span class="z-punctuation z-definition z-variable z-shell">$</span><span class="z-variable z-other z-readwrite z-shell">boot_loader_size</span></span></span>

<span class="z-variable z-other z-readwrite z-assignment z-shell">padcount</span><span class="z-keyword z-operator z-assignment z-shell">=</span><span class="z-string z-unquoted z-shell"><span class="z-meta z-group z-expansion z-arithmetic z-shell"><span class="z-punctuation z-definition z-variable z-shell">$</span><span class="z-punctuation z-section z-parens z-begin z-shell">((</span><span class="z-meta z-group z-expansion z-parameter z-shell"><span class="z-punctuation z-definition z-variable z-shell">$</span><span class="z-variable z-other z-readwrite z-shell">flash_size_in_MB</span></span> <span class="z-keyword z-operator z-arithmetic z-shell">*</span> <span class="z-constant z-numeric z-integer z-decimal z-shell">1024</span> <span class="z-keyword z-operator z-arithmetic z-shell">*</span> <span class="z-constant z-numeric z-integer z-decimal z-shell">1024</span> <span class="z-keyword z-operator z-arithmetic z-shell">-</span> <span class="z-meta z-group z-expansion z-parameter z-shell"><span class="z-punctuation z-definition z-variable z-shell">$</span><span class="z-variable z-other z-readwrite z-shell">boot_loader_size</span></span> <span class="z-keyword z-operator z-arithmetic z-shell">-</span> <span class="z-meta z-group z-expansion z-parameter z-shell"><span class="z-punctuation z-definition z-variable z-shell">$</span><span class="z-variable z-other z-readwrite z-shell">art_file_size</span></span> <span class="z-keyword z-operator z-arithmetic z-shell">-</span> <span class="z-meta z-group z-expansion z-parameter z-shell"><span class="z-punctuation z-definition z-variable z-shell">$</span><span class="z-variable z-other z-readwrite z-shell">sysupgrade_OpenWRT_size</span></span><span class="z-punctuation z-section z-parens z-end z-shell">))</span></span></span>

<span class="z-meta z-function-call z-shell"><span class="z-support z-function z-echo z-shell">echo</span></span><span class="z-meta z-function-call z-arguments z-shell"> <span class="z-string z-quoted z-double z-shell"><span class="z-punctuation z-definition z-string z-begin z-shell">&quot;</span> Write boot loader<span class="z-punctuation z-definition z-string z-end z-shell">&quot;</span></span></span>
<span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">dd</span></span><span class="z-meta z-function-call z-arguments z-shell"> if=<span class="z-meta z-group z-expansion z-parameter z-shell"><span class="z-punctuation z-definition z-variable z-shell">$</span><span class="z-variable z-other z-readwrite z-shell">boot_loader</span></span> bs=512 <span class="z-keyword z-operator z-assignment z-redirection z-shell">&gt;&gt;</span> <span class="z-string z-quoted z-double z-shell"><span class="z-punctuation z-definition z-string z-begin z-shell">&quot;</span><span class="z-meta z-group z-expansion z-parameter z-shell"><span class="z-punctuation z-definition z-variable z-shell">$</span><span class="z-punctuation z-section z-expansion z-parameter z-begin z-shell">{</span></span><span class="z-meta z-group z-expansion z-parameter z-shell"><span class="z-variable z-other z-readwrite z-shell">sysupgrade_OpenWRT</span></span><span class="z-meta z-group z-expansion z-parameter z-shell"><span class="z-punctuation z-section z-expansion z-parameter z-end z-shell">}</span></span>_dump<span class="z-punctuation z-definition z-string z-end z-shell">&quot;</span></span>.bin</span>
<span class="z-meta z-function-call z-shell"><span class="z-support z-function z-echo z-shell">echo</span></span><span class="z-meta z-function-call z-arguments z-shell"> <span class="z-string z-quoted z-double z-shell"><span class="z-punctuation z-definition z-string z-begin z-shell">&quot;</span>Write firmware<span class="z-punctuation z-definition z-string z-end z-shell">&quot;</span></span></span>
<span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">dd</span></span><span class="z-meta z-function-call z-arguments z-shell"> if=<span class="z-meta z-group z-expansion z-parameter z-shell"><span class="z-punctuation z-definition z-variable z-shell">$</span><span class="z-variable z-other z-readwrite z-shell">sysupgrade_OpenWRT</span></span> bs=512 <span class="z-keyword z-operator z-assignment z-redirection z-shell">&gt;&gt;</span> <span class="z-string z-quoted z-double z-shell"><span class="z-punctuation z-definition z-string z-begin z-shell">&quot;</span><span class="z-meta z-group z-expansion z-parameter z-shell"><span class="z-punctuation z-definition z-variable z-shell">$</span><span class="z-punctuation z-section z-expansion z-parameter z-begin z-shell">{</span></span><span class="z-meta z-group z-expansion z-parameter z-shell"><span class="z-variable z-other z-readwrite z-shell">sysupgrade_OpenWRT</span></span><span class="z-meta z-group z-expansion z-parameter z-shell"><span class="z-punctuation z-section z-expansion z-parameter z-end z-shell">}</span></span>_dump<span class="z-punctuation z-definition z-string z-end z-shell">&quot;</span></span>.bin</span>
<span class="z-meta z-function-call z-shell"><span class="z-support z-function z-echo z-shell">echo</span></span><span class="z-meta z-function-call z-arguments z-shell"> <span class="z-string z-quoted z-double z-shell"><span class="z-punctuation z-definition z-string z-begin z-shell">&quot;</span>Write padding FF<span class="z-punctuation z-definition z-string z-end z-shell">&quot;</span></span></span>
<span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">dd</span></span><span class="z-meta z-function-call z-arguments z-shell"> if=/dev/zero ibs=1 count=<span class="z-string z-quoted z-double z-shell"><span class="z-punctuation z-definition z-string z-begin z-shell">&quot;</span><span class="z-meta z-group z-expansion z-parameter z-shell"><span class="z-punctuation z-definition z-variable z-shell">$</span><span class="z-variable z-other z-readwrite z-shell">padcount</span></span><span class="z-punctuation z-definition z-string z-end z-shell">&quot;</span></span></span> <span class="z-keyword z-operator z-logical z-pipe z-shell">|</span> <span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">tr</span></span><span class="z-meta z-function-call z-arguments z-shell"> <span class="z-string z-quoted z-double z-shell"><span class="z-punctuation z-definition z-string z-begin z-shell">&quot;</span>\000<span class="z-punctuation z-definition z-string z-end z-shell">&quot;</span></span> <span class="z-string z-quoted z-double z-shell"><span class="z-punctuation z-definition z-string z-begin z-shell">&quot;</span>\377<span class="z-punctuation z-definition z-string z-end z-shell">&quot;</span></span> <span class="z-keyword z-operator z-assignment z-redirection z-shell">&gt;&gt;</span> <span class="z-string z-quoted z-double z-shell"><span class="z-punctuation z-definition z-string z-begin z-shell">&quot;</span><span class="z-meta z-group z-expansion z-parameter z-shell"><span class="z-punctuation z-definition z-variable z-shell">$</span><span class="z-punctuation z-section z-expansion z-parameter z-begin z-shell">{</span></span><span class="z-meta z-group z-expansion z-parameter z-shell"><span class="z-variable z-other z-readwrite z-shell">sysupgrade_OpenWRT</span></span><span class="z-meta z-group z-expansion z-parameter z-shell"><span class="z-punctuation z-section z-expansion z-parameter z-end z-shell">}</span></span>_dump<span class="z-punctuation z-definition z-string z-end z-shell">&quot;</span></span>.bin</span>
<span class="z-meta z-function-call z-shell"><span class="z-support z-function z-echo z-shell">echo</span></span><span class="z-meta z-function-call z-arguments z-shell"> <span class="z-string z-quoted z-double z-shell"><span class="z-punctuation z-definition z-string z-begin z-shell">&quot;</span>Write art partition<span class="z-punctuation z-definition z-string z-end z-shell">&quot;</span></span></span>
<span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">dd</span></span><span class="z-meta z-function-call z-arguments z-shell"> if=<span class="z-meta z-group z-expansion z-parameter z-shell"><span class="z-punctuation z-definition z-variable z-shell">$</span><span class="z-variable z-other z-readwrite z-shell">art_file</span></span> bs=512 <span class="z-keyword z-operator z-assignment z-redirection z-shell">&gt;&gt;</span> <span class="z-string z-quoted z-double z-shell"><span class="z-punctuation z-definition z-string z-begin z-shell">&quot;</span><span class="z-meta z-group z-expansion z-parameter z-shell"><span class="z-punctuation z-definition z-variable z-shell">$</span><span class="z-punctuation z-section z-expansion z-parameter z-begin z-shell">{</span></span><span class="z-meta z-group z-expansion z-parameter z-shell"><span class="z-variable z-other z-readwrite z-shell">sysupgrade_OpenWRT</span></span><span class="z-meta z-group z-expansion z-parameter z-shell"><span class="z-punctuation z-section z-expansion z-parameter z-end z-shell">}</span></span>_dump<span class="z-punctuation z-definition z-string z-end z-shell">&quot;</span></span>.bin</span>
</span></code></pre>
<table><thead><tr><th>parameter</th><th>Description</th></tr></thead><tbody>
<tr><td>flash_size_in_MB</td><td>new flash chip capacity</td></tr>
<tr><td>sysupgrade_OpenWRT</td><td>OpenWRT image (firmware)</td></tr>
<tr><td>art_file</td><td>ART partion from original flash, the last 64k block of the chip no matter what the chip size.</td></tr>
<tr><td>boot_loader</td><td>bootloader, the first 128kB from original flash</td></tr>
<tr><td>Output firmware</td><td>sysupgrade_OpenWRT_dump.bin, you can use this to program your new flash chip</td></tr>
</tbody></table>
<p>If you don't want to use this script, you can create image by yourself. You may to need hex editor like <a rel="noopener" target="_blank" href="https://mh-nexus.de/en/hxd/">HxDen</a> to do this.</p>
<p><img src="https://circuitlover.com/upgrade-flash-chip-tplink-tl-wr840n-4mb-to-8mb/images/create_image_manual.jpg" alt="New firmware layout" /></p>
<p>All file which I used in <a rel="noopener" target="_blank" href="https://drive.google.com/file/d/1kqXvFQYrolipvrrD3Rkv7J7JTZwgVHDn/view?usp=sharing">here</a></p>
<h3 id="2-3-re-solder-new-flash-chip"><a class="zola-anchor" href="#2-3-re-solder-new-flash-chip" aria-label="Anchor link for: 2-3-re-solder-new-flash-chip">2.3 Re-solder new flash chip</a></h3>
<p>After use CH341A to program new flash chip, you can re-solder new flash chip on target board.</p>
<p>ðŸ‘‰ If your board can not booting, don't worry. You can use <a rel="noopener" target="_blank" href="https://www.ebay.com/itm/SOIC8-SOP8-Flash-Chip-IC-Test-Clip-Socket-Adapter-BIOS-CH341A-USB-Programmer-/372555847443">Clip Socket Adapter</a> to try program flash again with out desolder chip.</p>
<h2 id="3-enjoy"><a class="zola-anchor" href="#3-enjoy" aria-label="Anchor link for: 3-enjoy">3. Enjoy</a></h2>
<p><img src="https://circuitlover.com/upgrade-flash-chip-tplink-tl-wr840n-4mb-to-8mb/images/software_status.jpg" alt="Software with new flash chip (8MB)" /></p>
<p>ðŸ‘‰ I used the firmware from <strong>TL-WR841N v13.x</strong>. Except for LED ,everything work well (Wi-Fi, Ethernet, Router feature).</p>

<p><b><a href="#">Back to top</a></b></p>
    </article>
    <div class="toc" aria-hidden="true">
      <div class="toc-sticky">
        <h3>Index</h3>
        <div class="toc-item">
          <a class="subtext" href="https://circuitlover.com/upgrade-flash-chip-tplink-tl-wr840n-4mb-to-8mb/#1-pre-requirement">1. Pre-requirement</a>
        </div>
        <div class="toc-item">
          <a class="subtext" href="https://circuitlover.com/upgrade-flash-chip-tplink-tl-wr840n-4mb-to-8mb/#2-let-s-do-it">2. Let&#x27;s do it</a>
        </div>
        <div class="toc-item-child">
          <a class="subtext" href="https://circuitlover.com/upgrade-flash-chip-tplink-tl-wr840n-4mb-to-8mb/#2-1-desolder-old-flash-chip"><small>- 2.1 Desolder old flash chip</small></a>
        </div>
        <div class="toc-item-child">
          <a class="subtext" href="https://circuitlover.com/upgrade-flash-chip-tplink-tl-wr840n-4mb-to-8mb/#2-2-program-new-flash-chip"><small>- 2.2 Program new flash chip</small></a>
        </div>
        <div class="toc-item-child">
          <a class="subtext" href="https://circuitlover.com/upgrade-flash-chip-tplink-tl-wr840n-4mb-to-8mb/#2-3-re-solder-new-flash-chip"><small>- 2.3 Re-solder new flash chip</small></a>
        </div>
        <div class="toc-item">
          <a class="subtext" href="https://circuitlover.com/upgrade-flash-chip-tplink-tl-wr840n-4mb-to-8mb/#3-enjoy">3. Enjoy</a>
        </div>
      </div>
    </div>
  </main>
  <footer>
    <hr />
    <div class="c">
      <nav>
        <ul><li><a href="https://circuitlover.com/atom.xml" target="_blank" title="Atom/RSS Feed"><i type="Button" class="svg rss" title="Atom/RSS Feed"></i></a></li><li class="js"><a class="m-protected" href="#dHV5ZW5sZEBjaXJjdWl0bG92ZXIuY29t" target="_blank" title="Mail"><i type="Button" class="svg mail" title="Mail"></i></a></li><li><a href="https://www.linkedin.com/in/tuyendl/" target="_blank" title="LinkedIn"><i type="Button" class="svg linkedin" title="LinkedIn"></i></a></li><li><a href="https://github.com/tuyenld/" target="_blank" title="Github"><i type="Button" class="svg github" title="Github"></i></a></li></ul>
      </nav>
      <p class="s90">Copyright &copy; 2023 CircuitLover</p>
      <nav>
        <ul><li class="s90"> <a href="https://circuitlover.com/about/"> About </a> </li><li class="s90"> <a href="https://circuitlover.com/contact/"> Contact </a> </li><li class="s90"> <a href="https://circuitlover.com/privacy/"> Privacy </a> </li><li class="s90"> <a href="https://circuitlover.com/sitemap.xml" target="_blank"> Sitemap </a> </li></ul>
      </nav>
      <p class="s90">Powered by <a href="https://www.getzola.org/" target="_blank">Zola</a> and <a href="https://github.com/jieiku/abridge/" target="_blank">Abridge</a></p>
    </div>
  </footer>
<span class="topout">
<span class="topleft"> </span><a href="#" class="top" title="Back to Top"><i class="svgs svgh angu"></i></a>
</span>
</body>
</html>